
<!-- profile.html (plantilla para perfil de abogado + formulario de solicitar consulta)
     Subir junto a index.html. Llama a profile.html?lawyer=1 (o 2,3) -->
<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Perfil abogado — Solicitar consulta</title>
  <style>
    :root{--accent:#0b5cff;--dark:#0b1b2b;--muted:#6b7280;--card-bg:#ffffff;--radius:12px;font-family:Inter, system-ui, -apple-system, 'Segoe UI', Roboto, Arial}
    body{margin:0;background:#f6f8fb;color:var(--dark)}
    .container{max-width:900px;margin:0 auto;padding:20px}
    .card{background:var(--card-bg);border-radius:var(--radius);padding:18px;box-shadow:0 6px 18px rgba(20,30,60,0.06)}
    .avatar{width:100%;height:300px;object-fit:cover;border-radius:10px}
    .muted{color:var(--muted)}
    label{display:block;font-size:13px;margin-bottom:6px}
    input,textarea,select{width:100%;padding:10px;border:1px solid #e6e9ef;border-radius:8px;margin-bottom:8px}
    button{background:var(--accent);color:white;border:0;padding:10px 14px;border-radius:10px;font-weight:700;cursor:pointer}
    @media(min-width:700px){ .layout{display:grid;grid-template-columns:1fr 360px;gap:18px} }
  </style>
</head>
<body>
  <div class="container">
    <a href="index.html">← Volver al inicio</a>

    <div id="profile" class="card" style="margin-top:12px">
      <!-- Aquí se inyecta dinamicamente el perfil -->
      <img id="profile-avatar" class="avatar" src="/img/mujer-confiada-rompe-barrera_1308-176959.jpg" alt="Foto abogado">
      <h2 id="profile-name">Nombre Abogado</h2>
      <div class="muted" id="profile-mp">MP ###</div>
      <div class="muted" id="profile-specialty">Especialidad</div>
      <p id="profile-bio" style="margin-top:10px">Descripción breve del abogado.</p>
      <div style="margin-top:8px"><span id="profile-price" style="font-weight:800">Precio consulta: $X</span></div>
    </div>

    <div style="height:18px"></div>

    <div class="card" id="booking" aria-labelledby="booking-title">
      <h3 id="booking-title">Solicitar consulta con <span id="booking-name">Abogado</span></h3>

      <!-- FORM: enviá a tu endpoint. Incluye lawyer_id oculto -->
      <form id="booking-form" action="/api/enviar-consulta.php" method="POST">
        <input type="hidden" name="lawyer_id" id="form-lawyer-id" value="">
        <div>
          <label for="name">Nombre completo</label>
          <input id="name" name="name" type="text" required>
        </div>
        <div>
          <label for="phone">Teléfono</label>
          <input id="phone" name="phone" type="text">
        </div>
        <div>
          <label for="email">Email</label>
          <input id="email" name="email" type="email" required>
        </div>
        <div>
          <label for="message">Resumen del caso</label>
          <textarea id="message" name="message" maxlength="1200"></textarea>
        </div>

        <div style="display:flex;gap:10px;flex-wrap:wrap;margin-top:8px">
          <button type="submit">Enviar solicitud</button>
          <!-- Opcional: redirigir a pago manteniendo datos en sesión/DB. -->
          <button type="button" id="pay-and-book" style="background:#f3f4f6;color:var(--dark);font-weight:700">Pagar y reservar</button>
        </div>

        <div id="form-msg" style="margin-top:10px;color:green;display:none"></div>
      </form>
    </div>
  </div>


  
  <script>
    // Datos de ejemplo para cada abogado: mantén sincronizado con tu index.html
    const lawyers = {
      "1": {
        name: "Dra. Flavia Singh",
        mp: "MP 12345657",
        specialty: "Especialista en jubilaciones y aportes previsionales",
        bio: "Asesoramiento en trámites previsionales, recursos administrativos y juicios previsionales.",
        avatar: "/img/mujer-confiada-rompe-barrera_1308-176959.jpg",
        price: "ARS $4.500"
      },
      "2": {
        name: "Lic. Liliana Aquino",
        mp: "MP 12343543",
        specialty: "Especialista en migraciones",
        bio: "Visas, residencia, apelaciones migratorias y asesoramiento a empresas.",
        avatar: "/img/pngtree-female-lawyer-professional-worker-avatar-png-image_15552148.png",
        price: "ARS $6.000"
      },
      "3": {
        name: "Dr. Martín López",
        mp: "MP 3455465657567",
        specialty: "Especialista en derecho laboral",
        bio: "Despidos, demandas laborales, negociación y representación en juzgados.",
        avatar: "img/imagen-perfil-avatar-hombre-aislada-fondo-imagen-profil-avatar-hombre_1293239-4870.jpg",
        price: "ARS $5.500"
      }
    };

    // Tomar lawyer id desde querystring
    function getQueryParam(name){
      return new URLSearchParams(location.search).get(name);
    }
    const id = getQueryParam('lawyer') || '1';
    const data = lawyers[id] || lawyers['1'];

    // Rellenar perfil
    document.getElementById('profile-avatar').src = data.avatar;
    document.getElementById('profile-avatar').alt = 'Foto de ' + data.name;
    document.getElementById('profile-name').textContent = data.name;
    document.getElementById('profile-mp').textContent = data.mp;
    document.getElementById('profile-specialty').textContent = data.specialty;
    document.getElementById('profile-bio').textContent = data.bio;
    document.getElementById('profile-price').textContent = 'Precio consulta: ' + data.price;
    document.getElementById('booking-name').textContent = data.name;
    document.getElementById('form-lawyer-id').value = id;

    // Envío del form por AJAX (igual que en tu index)
    document.getElementById('booking-form').addEventListener('submit', function(e){
      e.preventDefault();
      const form = this;
      fetch(form.action, {
        method: 'POST',
        body: new FormData(form)
      }).then(r=>r.text()).then(resp=>{
        document.getElementById('form-msg').style.display = 'block';
        document.getElementById('form-msg').textContent = 'Solicitud enviada. Nos comunicaremos para confirmar tu turno.';
        form.reset();
      }).catch(err=>{
        alert('Error al enviar la solicitud. Intentá nuevamente o escribinos por email.');
      });
    });

    // Pay & Book: aquí puedes implementar redirección a tu flujo de pago.
    document.getElementById('pay-and-book').addEventListener('click', function(){
      // Ejemplo simple: si usás MercadoPago, redirigir a la preferencia que genere el backend.
      // Podés enviar los datos del form al backend, generar la preferencia y redirigir al checkout.
      alert('Aquí podés redirigir al flujo de pago manteniendo el lawyer_id: ' + id);
    });

  </script>
</body>
</html>
